#pragma once

#ifndef QBUUPDATETRACKER_H
#define QBUUPDATETRACKER_H

/////////////////////////////////////////////////////////////////////////////////////////

class qbuUpdateTracker
{
public:
	qbuUpdateTracker(bool bChanged=false);
public:
	virtual bool Modify();
	virtual bool HasChanged();
	virtual bool ForceUnmodified();
	virtual void copyFrom(const qbuUpdateTracker& other);
private:
	bool	m_bChanged;
};

/////////////////////////////////////////////////////////////////////////////////////////

inline qbuUpdateTracker::qbuUpdateTracker(bool bChanged) : m_bChanged(bChanged)
{

}

/////////////////////////////////////////////////////////////////////////////////////////

inline void qbuUpdateTracker::copyFrom(const qbuUpdateTracker& other)
{
	m_bChanged = other.m_bChanged;
}

/////////////////////////////////////////////////////////////////////////////////////////

inline bool qbuUpdateTracker::Modify()
{
	bool retVal = HasChanged();
	m_bChanged = true;
	return retVal;
}

/////////////////////////////////////////////////////////////////////////////////////////

inline bool qbuUpdateTracker::HasChanged()
{
	return m_bChanged;
}

/////////////////////////////////////////////////////////////////////////////////////////

inline bool qbuUpdateTracker::ForceUnmodified()
{
	bool retVal = HasChanged();
	m_bChanged = false;
	return retVal;
}

/////////////////////////////////////////////////////////////////////////////////////////

#endif // QBUUPDATETRACKER_H
