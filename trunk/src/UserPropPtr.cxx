#include "UserPropPtr.h"
#include "UserPropery.h"

/////////////////////////////////////////////////////////////////////////////////////////

static int nTypeID =  qRegisterMetaType<QTUTILS::UserPropPtr>();

namespace QTUTILS {

/////////////////////////////////////////////////////////////////////////////////////////

UserPropPtr::UserPropPtr() : m_pProp(NULL)
{

}

/////////////////////////////////////////////////////////////////////////////////////////

UserPropPtr::UserPropPtr(UserProperty* pProp) : m_pProp(pProp)
{

}

/////////////////////////////////////////////////////////////////////////////////////////

UserPropPtr::UserPropPtr( const UserPropPtr & other ) 
{
	copy(other);
}

/////////////////////////////////////////////////////////////////////////////////////////

void UserPropPtr::copy( const UserPropPtr & other )
{
	m_pProp = other.m_pProp;
}

/////////////////////////////////////////////////////////////////////////////////////////

void UserPropPtr::destroy()
{
	// The shared pointer should handle this.
}

/////////////////////////////////////////////////////////////////////////////////////////

bool UserPropPtr::isNull()
{
	return (m_pProp == NULL);
}

/////////////////////////////////////////////////////////////////////////////////////////

QString UserPropPtr::toXML( bool bMakeRoot /*= true*/ )
{
	QString retVal;
	if (!isNull()) {
		retVal = m_pProp->toXML(bMakeRoot);
	}
	return retVal;
}

/////////////////////////////////////////////////////////////////////////////////////////

UserProperty* UserPropPtr::data() 
{
	return m_pProp.data();
}

/////////////////////////////////////////////////////////////////////////////////////////

const UserProperty* UserPropPtr::data() const
{
	return m_pProp.data();
}
/////////////////////////////////////////////////////////////////////////////////////////

}; // namespace QTUTILS